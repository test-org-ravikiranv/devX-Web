version: v1.0
name: Test MyApp
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu2004
blocks:
  - name: Docker Build & Push
    task:
      jobs:
        - name: Docker Build & Push
          commands:
            - checkout
            - 'docker build -t ravikirankiran097/devx-semophore:v1.0 .'
            - echo $DOCKERHUB_PASSWORD | docker login --username "$DOCKERHUB_USERNAME" --password-stdin
            - 'docker push ravikirankiran097/devx-semophore:v1.0'
            - docker logout
      secrets:
        - name: dockerhub_secret
